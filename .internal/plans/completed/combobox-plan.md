# Combobox ãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…è¨ˆç”»æ›¸

> APG Reference: https://www.w3.org/WAI/ARIA/apg/patterns/combobox/

---

## 1. æ¦‚è¦

Combobox ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆlistbox, grid, tree, dialogï¼‰ã‚’æŒã¤å…¥åŠ›ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å€¤ã‚’å…¥åŠ›ã™ã‚‹ã‹ã€ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‹ã‚‰é¸æŠã§ãã¾ã™ã€‚

**ä¸»è¦æ©Ÿèƒ½**:
- ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®é€£æº
- ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆnone, list, bothï¼‰
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã«ã‚ˆã‚‹å®Œå…¨ãªæ“ä½œ
- Select-only / Editable ã®2ã¤ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³

**ã‚¹ã‚³ãƒ¼ãƒ—æ±ºå®š**: æœ¬å®Ÿè£…ã§ã¯ **Listbox Popup ã‚’æŒã¤ Editable Comboboxï¼ˆList Autocompleteï¼‰** ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ã“ã‚Œã¯æœ€ã‚‚ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã‚ã‚Šã€Grid/Tree/Dialog Popup ã¯å°†æ¥ã®æ‹¡å¼µã¨ã—ã¾ã™ã€‚

**é¡ä¼¼ãƒ‘ã‚¿ãƒ¼ãƒ³**: MenuButtonï¼ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—åˆ¶å¾¡ï¼‰ã€Listboxï¼ˆé¸æŠè‚¢ã®ç®¡ç†ï¼‰

---

## 2. APG ä»•æ§˜ã‚µãƒãƒªãƒ¼

### Roles

| Role | å¯¾è±¡è¦ç´  | èª¬æ˜ |
|------|----------|------|
| `combobox` | `<input>` è¦ç´  | å€¤ã‚’å…¥åŠ›/è¡¨ç¤ºã™ã‚‹ãƒ¡ã‚¤ãƒ³è¦ç´  |
| `listbox` | `<ul>` è¦ç´  | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹é¸æŠè‚¢ãƒªã‚¹ãƒˆ |
| `option` | `<li>` è¦ç´  | å„é¸æŠè‚¢ |

### Propertiesï¼ˆé™çš„å±æ€§ï¼‰

| å±æ€§ | å¯¾è±¡è¦ç´  | å€¤ | å¿…é ˆ | å‚™è€ƒ |
|------|----------|-----|------|------|
| `role="combobox"` | input | - | Yes | æš—é»™çš„ã«è¨­å®šã•ã‚Œãªã„ |
| `aria-controls` | input | listbox ã® ID | Yes | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã¸ã®å‚ç…§ï¼ˆé–‰ã˜ã¦ã„ã‚‹æ™‚ã‚‚æœ‰åŠ¹ï¼‰ |
| `aria-haspopup` | input | `listbox` | No | listbox ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ |
| `aria-autocomplete` | input | `list` / `none` / `both` | Yes | ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆå‹•ä½œ |
| `aria-labelledby` / `aria-label` | input | IDå‚ç…§ / æ–‡å­—åˆ— | Yes | ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«å |
| `aria-disabled` | option | `true` | No | ç„¡åŠ¹ãªé¸æŠè‚¢ã«è¨­å®š |

### Statesï¼ˆå‹•çš„å±æ€§ï¼‰

| å±æ€§ | å¯¾è±¡è¦ç´  | å€¤ | å¿…é ˆ | å¤‰æ›´ãƒˆãƒªã‚¬ãƒ¼ |
|------|----------|-----|------|--------------|
| `aria-expanded` | input | `true` / `false` | Yes | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‹é–‰æ™‚ |
| `aria-activedescendant` | input | option ã® ID / ç©ºæ–‡å­—åˆ— | Yes | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å†…ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•æ™‚ã€‚é–‰ã˜ãŸæ™‚ãƒ»ãƒªã‚¹ãƒˆãŒç©ºã®æ™‚ã¯ã‚¯ãƒªã‚¢ |
| `aria-selected` | option | `true` / `false` | Yes | é¸æŠçŠ¶æ…‹å¤‰åŒ–æ™‚ |

### Keyboard Support

#### Comboboxï¼ˆinputï¼‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚

| ã‚­ãƒ¼ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|------|------------|
| `â†“` | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ãã€‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’æœ€åˆã® option ã¸ï¼ˆaria-activedescendantï¼‰ |
| `â†‘` | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ãã€‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’æœ€å¾Œã® option ã¸ |
| `Enter` | é¸æŠä¸­ã® option ã‚’ç¢ºå®šã€‚ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã‚‹ |
| `Escape` | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã‚‹ã€‚å…¥åŠ›å€¤ã‚’é¸æŠå‰ã®çŠ¶æ…‹ã«å¾©å…ƒ |
| `Alt + â†“` | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ãï¼ˆå…¥åŠ›å€¤ãƒ»ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ä½ç½®ã¯ä¿æŒï¼‰ |
| `Alt + â†‘` | é¸æŠã‚’ç¢ºå®šã—ã¦ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã‚‹ |
| å°åˆ·å¯èƒ½æ–‡å­— | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã€‚ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè¡Œï¼ˆautocomplete="list" ã®å ´åˆï¼‰ã€‚ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‹ã |
| `Tab` | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã‚‹ã€‚æ¬¡ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½è¦ç´ ã¸ |

#### Listbox ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å†…ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚

| ã‚­ãƒ¼ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|------|------------|
| `â†“` | æ¬¡ã®æœ‰åŠ¹ãª option ã¸ç§»å‹•ï¼ˆdisabled ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰ |
| `â†‘` | å‰ã®æœ‰åŠ¹ãª option ã¸ç§»å‹•ï¼ˆdisabled ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰ |
| `Home` | æœ€åˆã®æœ‰åŠ¹ãª option ã¸ç§»å‹• |
| `End` | æœ€å¾Œã®æœ‰åŠ¹ãª option ã¸ç§»å‹• |
| `Enter` | é¸æŠã‚’ç¢ºå®šã€‚ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã‚‹ |
| `Escape` | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã‚‹ã€‚å…¥åŠ›å€¤ã‚’é¸æŠå‰ã®çŠ¶æ…‹ã«å¾©å…ƒ |
| `Tab` | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚’é–‰ã˜ã‚‹ã€‚æ¬¡ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½è¦ç´ ã¸ |
| å°åˆ·å¯èƒ½æ–‡å­— | Type-ahead æ¤œç´¢ |

### Focus Management

- **DOM ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã¯å¸¸ã« input ã«ç¶­æŒ**
- `aria-activedescendant` ã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—å†…ã®ä»®æƒ³ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’ç®¡ç†
- ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‰æ™‚ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çµæœãŒç©ºã®æ™‚ã¯ `aria-activedescendant` ã‚’ã‚¯ãƒªã‚¢ï¼ˆç©ºæ–‡å­—åˆ—ã¾ãŸã¯å±æ€§å‰Šé™¤ï¼‰
- é¸æŠç¢ºå®šå¾Œã‚‚ input ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’ç¶­æŒ
- `aria-activedescendant` ã¯å¸¸ã« DOM ã«å­˜åœ¨ã™ã‚‹è¦ç´ ã® ID ã‚’å‚ç…§ã™ã‚‹ã“ã¨

### Disabled Option ã®æ‰±ã„

- `aria-disabled="true"` ã‚’è¨­å®š
- çŸ¢å°ã‚­ãƒ¼ã§ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã¯ã‚¹ã‚­ãƒƒãƒ—
- Enter ã‚­ãƒ¼ã§é¸æŠä¸å¯
- ã‚¯ãƒªãƒƒã‚¯ã§é¸æŠä¸å¯
- ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çµæœã«ã¯å«ã‚ã‚‹ï¼ˆè¦–è¦šçš„ã«ã¯è¡¨ç¤ºï¼‰

### Listbox ã®è¡¨ç¤º/éè¡¨ç¤º

- é–‰ã˜ã¦ã„ã‚‹æ™‚: `hidden` å±æ€§ã‚’è¨­å®šï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ„ãƒªãƒ¼ã‹ã‚‰é™¤å¤–ï¼‰
- `aria-controls` ã¯é–‰ã˜ã¦ã„ã‚‹æ™‚ã‚‚ listbox ã® ID ã‚’å‚ç…§ã—ç¶šã‘ã‚‹
- listbox è¦ç´ è‡ªä½“ã¯å¸¸ã« DOM ã«å­˜åœ¨ã•ã›ã‚‹ï¼ˆ`aria-controls` ã®å‚ç…§å…ˆã¨ã—ã¦å¿…è¦ï¼‰

### IME å…¥åŠ›ã®æ‰±ã„

- `compositionstart` ã‚¤ãƒ™ãƒ³ãƒˆã§ IME å…¥åŠ›é–‹å§‹ã‚’æ¤œçŸ¥
- `compositionend` ã‚¤ãƒ™ãƒ³ãƒˆã¾ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»é¸æŠå‡¦ç†ã‚’æŠ‘åˆ¶
- ç¢ºå®šå¾Œã«å…¥åŠ›å€¤ã‚’åæ˜ ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

---

## 3. ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

DAMP åŸå‰‡ã«åŸºã¥ãã€ä»¥ä¸‹ã®æ§‹æˆã§ãƒ†ã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```typescript
describe('Combobox', () => {
  // ğŸ”´ High Priority: APG æº–æ‹ ã®æ ¸å¿ƒ
  describe('APG ARIA Attributes', () => {
    // role ã®æ¤œè¨¼
    // aria-* å±æ€§ã®æ¤œè¨¼
    // çŠ¶æ…‹å¤‰åŒ–ã®æ¤œè¨¼
  });

  describe('APG Keyboard Interaction', () => {
    // å¿…é ˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã®æ¤œè¨¼
    // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‹é–‰
    // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
    // Alt ã‚­ãƒ¼ã‚³ãƒ³ãƒ“ãƒãƒ¼ã‚·ãƒ§ãƒ³
  });

  describe('Focus Management', () => {
    // aria-activedescendant ã®æ¤œè¨¼
    // DOM ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®ç¶­æŒ
  });

  describe('Autocomplete', () => {
    // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å‹•ä½œ
    // é¸æŠç¢ºå®š
    // autocomplete="none" ã®å‹•ä½œ
  });

  describe('Disabled Options', () => {
    // ç„¡åŠ¹ãªé¸æŠè‚¢ã®æ‰±ã„
  });

  describe('Mouse Interaction', () => {
    // ã‚¯ãƒªãƒƒã‚¯ã§ã®é¸æŠ
    // å¤–å´ã‚¯ãƒªãƒƒã‚¯ã§ã®é–‰ã˜ã‚‹
  });

  // ğŸŸ¡ Medium Priority
  describe('Accessibility', () => {
    // axe-core é•åãªã—ã®æ¤œè¨¼
  });

  // ğŸŸ¢ Low Priority
  describe('Props & Behavior', () => {
    // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å‘¼ã³å‡ºã—ã®æ¤œè¨¼
    // className ç¶™æ‰¿ã®æ¤œè¨¼
  });
});
```

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§

#### ğŸ”´ High Priority: ARIA å±æ€§

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æ¤œè¨¼å†…å®¹ |
|--------------|----------|
| `has role="combobox" on input` | role å±æ€§ã®å­˜åœ¨ |
| `has accessible name via aria-labelledby` | ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«åã®è¨­å®š |
| `has aria-controls pointing to listbox` | aria-controls ã®è¨­å®š |
| `aria-controls points to existing listbox even when closed` | é–‰ã˜ãŸçŠ¶æ…‹ã§ã‚‚å‚ç…§ãŒæœ‰åŠ¹ |
| `has aria-expanded="false" when closed` | åˆæœŸçŠ¶æ…‹ |
| `has aria-expanded="true" when opened` | é–‹ã„ãŸçŠ¶æ…‹ |
| `has aria-autocomplete="list"` | ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆå±æ€§ |
| `has aria-activedescendant when option focused` | ä»®æƒ³ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ |
| `clears aria-activedescendant when closed` | é–‰ã˜ãŸæ™‚ã«ã‚¯ãƒªã‚¢ |
| `clears aria-activedescendant when list is empty` | ãƒªã‚¹ãƒˆãŒç©ºã®æ™‚ã«ã‚¯ãƒªã‚¢ |
| `listbox has role="listbox"` | ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã® role |
| `listbox is hidden when closed` | é–‰ã˜ãŸæ™‚ã«éè¡¨ç¤º |
| `options have role="option"` | é¸æŠè‚¢ã® role |
| `selected option has aria-selected="true"` | é¸æŠçŠ¶æ…‹ |
| `disabled option has aria-disabled="true"` | ç„¡åŠ¹çŠ¶æ…‹ |

#### ğŸ”´ High Priority: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æ¤œè¨¼å†…å®¹ |
|--------------|----------|
| `opens popup on ArrowDown` | ä¸‹çŸ¢å°ã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‹ã |
| `opens popup on ArrowUp` | ä¸ŠçŸ¢å°ã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‹ã |
| `focuses first option on ArrowDown` | ä¸‹çŸ¢å°ã§æœ€åˆã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ |
| `focuses last option on ArrowUp` | ä¸ŠçŸ¢å°ã§æœ€å¾Œã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ |
| `closes popup on Escape` | Escape ã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‰ã˜ã‚‹ |
| `restores input value on Escape` | Escape ã§å…¥åŠ›å€¤ã‚’å¾©å…ƒ |
| `selects option on Enter` | Enter ã§é¸æŠç¢ºå®š |
| `closes popup on Enter` | Enter ã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‰ã˜ã‚‹ |
| `moves to next option on ArrowDown` | ä¸‹çŸ¢å°ã§æ¬¡ã¸ç§»å‹• |
| `moves to previous option on ArrowUp` | ä¸ŠçŸ¢å°ã§å‰ã¸ç§»å‹• |
| `moves to first option on Home` | Home ã§æœ€åˆã¸ |
| `moves to last option on End` | End ã§æœ€å¾Œã¸ |
| `opens popup on typing` | æ–‡å­—å…¥åŠ›ã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‹ã |
| `closes popup on Tab` | Tab ã§ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‰ã˜ã‚‹ |
| `Alt+ArrowDown opens without changing focus` | Alt+â†“ ã§ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ä½ç½®ä¿æŒ |
| `Alt+ArrowUp commits selection and closes` | Alt+â†‘ ã§é¸æŠç¢ºå®šã—ã¦é–‰ã˜ã‚‹ |

#### ğŸ”´ High Priority: ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æ¤œè¨¼å†…å®¹ |
|--------------|----------|
| `keeps DOM focus on input when navigating` | DOM ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç¶­æŒ |
| `updates aria-activedescendant on navigation` | ä»®æƒ³ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ›´æ–° |
| `aria-activedescendant references existing element` | å­˜åœ¨ã™ã‚‹è¦ç´ ã‚’å‚ç…§ |

#### ğŸ”´ High Priority: ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æ¤œè¨¼å†…å®¹ |
|--------------|----------|
| `filters options based on input` | å…¥åŠ›ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° |
| `shows all options when input is empty` | ç©ºå…¥åŠ›ã§å…¨è¡¨ç¤º |
| `updates input value on selection` | é¸æŠã§å…¥åŠ›å€¤æ›´æ–° |
| `does not filter when autocomplete="none"` | none ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãªã— |

#### ğŸ”´ High Priority: Disabled Options

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æ¤œè¨¼å†…å®¹ |
|--------------|----------|
| `skips disabled option on ArrowDown` | ä¸‹çŸ¢å°ã§ disabled ã‚’ã‚¹ã‚­ãƒƒãƒ— |
| `skips disabled option on ArrowUp` | ä¸ŠçŸ¢å°ã§ disabled ã‚’ã‚¹ã‚­ãƒƒãƒ— |
| `does not select disabled option on Enter` | Enter ã§ disabled ã‚’é¸æŠä¸å¯ |
| `does not select disabled option on click` | ã‚¯ãƒªãƒƒã‚¯ã§ disabled ã‚’é¸æŠä¸å¯ |

#### ğŸ”´ High Priority: ãƒã‚¦ã‚¹æ“ä½œ

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æ¤œè¨¼å†…å®¹ |
|--------------|----------|
| `selects option on click` | ã‚¯ãƒªãƒƒã‚¯ã§é¸æŠ |
| `closes popup on option click` | ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹ |
| `closes popup on outside click` | å¤–å´ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹ |
| `does not select on outside click` | å¤–å´ã‚¯ãƒªãƒƒã‚¯ã§é¸æŠã—ãªã„ |

#### ğŸŸ¡ Medium Priority: ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æ¤œè¨¼å†…å®¹ |
|--------------|----------|
| `has no axe violations when closed` | é–‰ã˜ãŸçŠ¶æ…‹ã§ã®æº–æ‹  |
| `has no axe violations when opened` | é–‹ã„ãŸçŠ¶æ…‹ã§ã®æº–æ‹  |
| `has no axe violations with selection` | é¸æŠçŠ¶æ…‹ã§ã®æº–æ‹  |

#### ğŸŸ¢ Low Priority: Props

| ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æ¤œè¨¼å†…å®¹ |
|--------------|----------|
| `calls onSelect when option selected` | ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ |
| `calls onInputChange when typing` | å…¥åŠ›ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ |
| `calls onOpenChange when popup toggles` | é–‹é–‰ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ |
| `applies className to container` | ã‚¹ã‚¿ã‚¤ãƒ«ç¶™æ‰¿ |
| `supports disabled state on combobox` | disabled å±æ€§ |

---

## 4. å®Ÿè£…è©³ç´°

### Props è¨­è¨ˆï¼ˆReactï¼‰

```typescript
export interface ComboboxOption {
  id: string;
  label: string;
  disabled?: boolean;
}

export interface ComboboxProps extends Omit<
  React.HTMLAttributes<HTMLDivElement>,
  'onChange'
> {
  /** é¸æŠè‚¢ãƒªã‚¹ãƒˆ */
  options: ComboboxOption[];

  /** é¸æŠä¸­ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ IDï¼ˆåˆ¶å¾¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ï¼‰ */
  selectedOptionId?: string;

  /** ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ ID */
  defaultSelectedOptionId?: string;

  /** å…¥åŠ›å€¤ï¼ˆåˆ¶å¾¡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç”¨ï¼‰ */
  inputValue?: string;

  /** ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå…¥åŠ›å€¤ */
  defaultInputValue?: string;

  /** ãƒ©ãƒ™ãƒ«ãƒ†ã‚­ã‚¹ãƒˆ */
  label: string;

  /** ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ */
  placeholder?: string;

  /** ç„¡åŠ¹çŠ¶æ…‹ */
  disabled?: boolean;

  /** ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã‚¿ã‚¤ãƒ— */
  autocomplete?: 'none' | 'list' | 'both';

  /** é¸æŠæ™‚ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
  onSelect?: (option: ComboboxOption) => void;

  /** å…¥åŠ›å¤‰æ›´ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
  onInputChange?: (value: string) => void;

  /** ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—é–‹é–‰ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
  onOpenChange?: (isOpen: boolean) => void;
}
```

**Props è¨­è¨ˆã®è£œè¶³**:
- `selectedOptionId`: é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã® IDã€‚å…¥åŠ›å€¤ã¨ã¯åˆ¥æ¦‚å¿µã¨ã—ã¦ç®¡ç†
- `inputValue`: å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆã€‚é¸æŠæ™‚ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã® `label` ãŒè¨­å®šã•ã‚Œã‚‹
- é¸æŠã¨ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚’åˆ†é›¢ã™ã‚‹ã“ã¨ã§ã€editable combobox ã§ã®çŠ¶æ…‹ç®¡ç†ã‚’æ˜ç¢ºåŒ–

### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯åˆ¥ã®æ³¨æ„ç‚¹

#### React
- `useId()` ã§ä¸€æ„ãª ID ç”Ÿæˆ
- `aria-activedescendant` ã®ç®¡ç†ã« `useState` ã‚’ä½¿ç”¨
- `useEffect` ã§ã‚¯ãƒªãƒƒã‚¯å¤–å´æ¤œå‡º
- IME å…¥åŠ›ã¯ `useState` ã§ `isComposing` ã‚’ç®¡ç†

#### Vue
- `defineOptions({ inheritAttrs: false })` ã®ä½¿ç”¨
- `useId()` ã¾ãŸã¯ `Math.random()` ã§ ID ç”Ÿæˆ
- `v-model` ã«ã‚ˆã‚‹åŒæ–¹å‘ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å¯¾å¿œ
- `@compositionstart` / `@compositionend` ã§ IME åˆ¶å¾¡

#### Svelte
- `$props()` ã«ã‚ˆã‚‹ props å—ã‘å–ã‚Š
- `{...$$restProps}` ã«ã‚ˆã‚‹å±æ€§ç¶™æ‰¿
- `$effect` ã§ã‚¯ãƒªãƒƒã‚¯å¤–å´æ¤œå‡º
- `oncompositionstart` / `oncompositionend` ã§ IME åˆ¶å¾¡

#### Astro (Web Components)
- `customElements.define()` ã§ã‚«ã‚¹ã‚¿ãƒ è¦ç´ ç™»éŒ²
- Shadow DOM ã¯ä½¿ç”¨ã—ãªã„ï¼ˆã‚¹ã‚¿ã‚¤ãƒ«ç¶™æ‰¿ã®ãŸã‚ï¼‰
- å±æ€§å¤‰æ›´ã®ç›£è¦–ã« `attributeChangedCallback` ã‚’ä½¿ç”¨

### æ§‹é€ å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Container (div)                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Label (label)  id="combobox-label"                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Input Wrapper (div)                                  â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ Input (input)                                    â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ role="combobox"                                  â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ aria-controls="listbox-id"                       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ aria-expanded="true/false"                       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ aria-autocomplete="list"                         â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ aria-activedescendant="option-id" (or empty)     â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ aria-labelledby="combobox-label"                 â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Listbox (ul)  hidden={!isOpen}                      â”‚ â”‚
â”‚ â”‚ role="listbox"                                      â”‚ â”‚
â”‚ â”‚ id="listbox-id"                                     â”‚ â”‚
â”‚ â”‚ aria-labelledby="combobox-label"                    â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ Option (li)  role="option"                       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ id="option-1"                                    â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ aria-selected="true/false"                       â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ Option (li)  role="option"                       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ id="option-2"                                    â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ aria-selected="false"                            â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ aria-disabled="true"                             â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ³¨**: Toggle Button ã¯æœ¬å®Ÿè£…ã§ã¯çœç•¥ã€‚å¿…è¦ã«å¿œã˜ã¦å°†æ¥è¿½åŠ å¯èƒ½ã€‚

---

## 5. TDD ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### Phase 0: è¨­è¨ˆæº–å‚™

1. **APG ä»•æ§˜ã®ç¢ºèª** âœ“
   - APG å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã¿è¾¼ã¿
   - Examples ã®å‹•ä½œç¢ºèª
   - Edge case ã®æ´—ã„å‡ºã—

2. **llm.md ã®ä½œæˆ**
   ```bash
   touch src/patterns/combobox/llm.md
   ```
   - `.internal/llm-md-template.md` ã‚’ãƒ™ãƒ¼ã‚¹ã«ä½œæˆ
   - Codex ã« llm.md ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä¾é ¼

### Phase 1: ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆRED ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

1. **React ãƒ†ã‚¹ãƒˆã®ä½œæˆ**
   ```bash
   touch src/patterns/combobox/Combobox.test.tsx
   npm run test -- Combobox.test.tsx
   ```
   - å…¨ãƒ†ã‚¹ãƒˆãŒ FAIL ã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆå®Ÿè£…å‰ï¼‰

2. **ä»–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ãƒ†ã‚¹ãƒˆä½œæˆ**
   - Vue: `Combobox.test.vue.ts`
   - Svelte: `Combobox.test.svelte.ts`
   - Astro: `Combobox.test.astro.ts`

3. **Codex ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼ï¼ˆãƒ†ã‚¹ãƒˆï¼‰**

### Phase 2: å®Ÿè£…ï¼ˆGREEN ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

1. **React å®Ÿè£…**
   ```bash
   touch src/patterns/combobox/Combobox.tsx
   npm run test -- Combobox.test.tsx --watch
   ```

2. **Codex ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼ï¼ˆReact å®Ÿè£…ï¼‰**

3. **ä»–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å®Ÿè£…**
   - Vue â†’ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ â†’ ãƒ¬ãƒ“ãƒ¥ãƒ¼
   - Svelte â†’ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ â†’ ãƒ¬ãƒ“ãƒ¥ãƒ¼
   - Astro â†’ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ â†’ ãƒ¬ãƒ“ãƒ¥ãƒ¼

4. **CSS ä½œæˆã¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**
   ```bash
   touch src/styles/patterns/combobox.css
   ```
   - `src/styles/global.css` ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’è¿½åŠ 

### Phase 3: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆREFACTOR ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

1. **ã‚³ãƒ¼ãƒ‰æ•´ç†**
   - é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®æ•´ç†
   - TypeScript å‹ã®æ”¹å–„

2. **Codex æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼**

### Phase 4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

1. **AccessibilityDocs.astro**
2. **TestingDocs.astro**
3. **NativeHtmlNotice.astro** - `<select>` ã¨ `<datalist>` ã¨ã®æ¯”è¼ƒ

### Phase 5: ãƒšãƒ¼ã‚¸ä½œæˆãƒ»çµ±åˆ

1. **ãƒ‡ãƒ¢ãƒšãƒ¼ã‚¸ä½œæˆ**
   - å„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç”¨ã®ãƒšãƒ¼ã‚¸ã‚’ä½œæˆ
   - index.astro ã§ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®š

2. **patterns.ts / README.md / README.ja.md æ›´æ–°**

3. **æœ€çµ‚ç¢ºèª**
   ```bash
   npm run build
   npm run test
   npm run lint
   ```

---

## 6. Codex ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒã‚¤ãƒ³ãƒˆ

### llm.md ãƒ¬ãƒ“ãƒ¥ãƒ¼

```
ä»¥ä¸‹ã® llm.md ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„:
1. APG ä»•æ§˜ã¨ã®æ•´åˆæ€§
2. å¿…é ˆå±æ€§ã®æ¼ã‚ŒãŒãªã„ã‹
3. ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã®ç¶²ç¾…æ€§
4. ãƒ†ã‚¹ãƒˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã®å¦¥å½“æ€§
```

### ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼

```
ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„:
1. APG ä»•æ§˜ã®å…¨è¦ä»¶ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹
2. DAMP åŸå‰‡ã«å¾“ã£ã¦ã„ã‚‹ã‹
3. Edge case ã®è€ƒæ…®
   - disabled option
   - ç©ºã® options
   - ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°çµæœãŒç©ºã®å ´åˆ
   - IME å…¥åŠ›ä¸­ã®å‹•ä½œ
4. ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼ˆaxe-coreï¼‰ã®ç¶²ç¾…æ€§
```

### å®Ÿè£…ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼

```
ä»¥ä¸‹ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ãã ã•ã„:
1. APG ä»•æ§˜ã¸ã®æº–æ‹ 
2. ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®æ­£ç¢ºæ€§
3. aria-activedescendant ã«ã‚ˆã‚‹ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†
4. ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã®å‹•ä½œ
5. HTML å±æ€§ç¶™æ‰¿ãƒ‘ã‚¿ãƒ¼ãƒ³ã®éµå®ˆ
6. TypeScript å‹å®šç¾©ã®å“è³ª
7. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®å•é¡Œï¼ˆXSS ç­‰ï¼‰
```

---

## 7. ãƒªã‚¹ã‚¯ã¨æ³¨æ„ç‚¹

### æŠ€è¡“çš„ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| aria-activedescendant ã®ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œ | ä¸­ | ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ†ã‚¹ãƒˆ |
| ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | ä½ | å¤§é‡ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ™‚ã¯ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æ¤œè¨ |
| ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã®æŒ™å‹•å·®ç•° | é«˜ | NVDA, VoiceOver ã§ã®å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆæ¨å¥¨ |
| aria-activedescendant ã®å‚ç…§åˆ‡ã‚Œ | é«˜ | ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œã«å¿…ãšå‚ç…§ã‚’æ›´æ–°/ã‚¯ãƒªã‚¢ |
| é¸æŠå€¤ã¨å…¥åŠ›å€¤ã®åŒæœŸã‚ºãƒ¬ | ä¸­ | selectedOptionId ã¨ inputValue ã‚’æ˜ç¢ºã«åˆ†é›¢ |

### å®Ÿè£…ä¸Šã®æ³¨æ„ç‚¹

- **CSS ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ¼ã‚Œ**: `src/styles/patterns/combobox.css` ã‚’ä½œæˆã—ãŸã‚‰ã€å¿…ãš `src/styles/global.css` ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’è¿½åŠ 
- **DOM ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®ç¶­æŒ**: ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—æ“ä½œä¸­ã‚‚å¿…ãš input ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’ç¶­æŒ
- **aria-activedescendant**: å­˜åœ¨ã—ãªã„ ID ã‚’å‚ç…§ã—ãªã„ã‚ˆã†æ³¨æ„ã€‚ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¾Œã¯å¿…ãšæ›´æ–°
- **ã‚¯ãƒªãƒƒã‚¯å¤–å´æ¤œå‡º**: ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’ç¢ºå®Ÿã«
- **IME å…¥åŠ›**: `compositionstart` ã‹ã‚‰ `compositionend` ã¾ã§ã¯ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»é¸æŠã‚’æŠ‘åˆ¶
- **listbox ã® DOM å­˜åœ¨**: `aria-controls` ã®å‚ç…§å…ˆã¨ã—ã¦å¸¸ã« DOM ã«å­˜åœ¨ã•ã›ã‚‹ï¼ˆ`hidden` å±æ€§ã§éè¡¨ç¤ºï¼‰

### ãƒã‚¤ãƒ†ã‚£ãƒ– HTML ã¨ã®æ¯”è¼ƒ

| æ©Ÿèƒ½ | `<select>` | `<datalist>` | ã‚«ã‚¹ã‚¿ãƒ  Combobox |
|------|------------|--------------|-------------------|
| ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ | âœ— | âœ“ | âœ“ |
| ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« | é™å®šçš„ | é™å®šçš„ | å®Œå…¨ |
| è¤‡é›‘ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ | âœ— | âœ— | âœ“ |
| ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ | ãƒ–ãƒ©ã‚¦ã‚¶ä¾å­˜ | ãƒ–ãƒ©ã‚¦ã‚¶ä¾å­˜ | å®Œå…¨åˆ¶å¾¡ |

**æ¨å¥¨**: ã‚·ãƒ³ãƒ—ãƒ«ãªé¸æŠè‚¢ã®ã¿ãªã‚‰ `<select>` ã‚’ä½¿ç”¨ã€‚ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆãŒå¿…è¦ãªã‚‰ `<datalist>` ã‚’æ¤œè¨ã€‚ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ«ã‚„è¤‡é›‘ãª UI ãŒå¿…è¦ãªå ´åˆã®ã¿ã‚«ã‚¹ã‚¿ãƒ  Combobox ã‚’å®Ÿè£…ã€‚

---

## æˆæœç‰©ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 0: è¨­è¨ˆæº–å‚™
- [ ] APG ä»•æ§˜ã®èª¿æŸ»ãƒ»æ•´ç†
- [ ] `src/patterns/combobox/llm.md` - AI å‘ã‘å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«

### Phase 1: ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆå®Ÿè£…å‰ï¼‰
- [ ] `Combobox.test.tsx` - React ãƒ†ã‚¹ãƒˆ
- [ ] `Combobox.test.vue.ts` - Vue ãƒ†ã‚¹ãƒˆ
- [ ] `Combobox.test.svelte.ts` - Svelte ãƒ†ã‚¹ãƒˆ
- [ ] `Combobox.test.astro.ts` - Astro E2E ãƒ†ã‚¹ãƒˆ

### Phase 2: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- [ ] `Combobox.tsx` - React å®Ÿè£…
- [ ] `Combobox.vue` - Vue å®Ÿè£…
- [ ] `Combobox.svelte` - Svelte å®Ÿè£…
- [ ] `Combobox.astro` - Astro å®Ÿè£…ï¼ˆWeb Componentsï¼‰
- [ ] `src/styles/patterns/combobox.css` - CSS ã‚¹ã‚¿ã‚¤ãƒ«
- [ ] `src/styles/global.css` ã« CSS ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆè¿½åŠ 

### Phase 3: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [ ] `AccessibilityDocs.astro` - ARIA ä»•æ§˜è§£èª¬
- [ ] `TestingDocs.astro` - ãƒ†ã‚¹ãƒˆè§£èª¬
- [ ] `NativeHtmlNotice.astro` - ãƒã‚¤ãƒ†ã‚£ãƒ– HTML æ³¨è¨˜

### Phase 4: ãƒšãƒ¼ã‚¸ä½œæˆ
- [ ] `src/pages/patterns/combobox/index.astro` - ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- [ ] `src/pages/patterns/combobox/react/index.astro`
- [ ] `src/pages/patterns/combobox/vue/index.astro`
- [ ] `src/pages/patterns/combobox/svelte/index.astro`
- [ ] `src/pages/patterns/combobox/astro/index.astro`

### Phase 5: çµ±åˆ
- [ ] `src/lib/patterns.ts` ã® status ã‚’ available ã«æ›´æ–°
- [ ] `README.md` ã®å®Ÿè£…çŠ¶æ³ã‚’æ›´æ–°
- [ ] `README.ja.md` ã®å®Ÿè£…çŠ¶æ³ã‚’æ›´æ–°
