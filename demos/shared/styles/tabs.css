/* =============================================================================
   TABS COMPONENT STYLES
   ============================================================================= */

@layer components {
  /* Tabs Container */
  .apg-tabs {
    @apply flex border border-gray-300 rounded-md overflow-hidden;
  }

  .apg-tabs--vertical {
    @apply flex-row;
  }

  .apg-tabs--horizontal {
    @apply flex-col;
  }

  /* Responsive: vertical becomes horizontal on mobile */
  @media (max-width: 768px) {
    .apg-tabs--vertical {
      @apply flex-col;
    }
  }

  /* Tablist */
  .apg-tablist {
    @apply flex bg-gray-50 overflow-x-auto;
  }

  .apg-tablist--horizontal {
    @apply flex-row border-b border-gray-300;
  }

  .apg-tablist--vertical {
    @apply flex-col border-r border-gray-300 min-w-[200px];
  }

  /* Responsive: vertical tablist becomes horizontal on mobile */
  @media (max-width: 768px) {
    .apg-tablist--vertical {
      @apply flex-row border-r-0 border-b border-gray-300 min-w-0 overflow-x-auto;
    }
  }

  /* Individual Tab */
  .apg-tab {
    @apply relative flex items-center gap-2 bg-transparent border-0 px-4 py-3;
    @apply text-sm font-medium text-gray-500 cursor-pointer whitespace-nowrap;
    @apply transition-all duration-200 ease-in-out;
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset focus:z-10;
    @apply min-h-[44px]; /* Touch target minimum size */
  }

  .apg-tab--horizontal {
    @apply border-b-2 border-transparent;
  }

  .apg-tab--vertical {
    @apply border-r-2 border-transparent justify-start w-full text-left;
    @apply flex-shrink-0 min-w-[120px];
  }

  /* Responsive: vertical tabs become horizontal on mobile */
  @media (max-width: 768px) {
    .apg-tab--vertical {
      @apply border-r-0 border-b-2 border-transparent;
      @apply justify-center text-center min-w-[120px] w-auto;
    }
  }

  /* Tab States */
  .apg-tab:hover:not(.apg-tab--disabled) {
    @apply bg-gray-100 text-gray-700;
  }

  .apg-tab--selected.apg-tab--horizontal {
    @apply bg-white text-gray-700 border-b-blue-500;
  }

  .apg-tab--selected.apg-tab--vertical {
    @apply bg-white text-gray-700 border-r-blue-500;
  }

  /* Responsive: selected vertical tabs on mobile */
  @media (max-width: 768px) {
    .apg-tab--selected.apg-tab--vertical {
      @apply border-r-transparent border-b-blue-500;
    }
  }

  .apg-tab--disabled {
    @apply text-gray-400 cursor-not-allowed opacity-60;
  }

  .apg-tab--disabled:hover {
    @apply bg-transparent text-gray-400;
  }

  /* Tab Label */
  .apg-tab-label {
    @apply flex-1;
  }

  /* Delete Button */
  .apg-tab-delete {
    @apply flex items-center justify-center w-5 h-5 bg-transparent border-0 rounded-full;
    @apply text-base leading-none text-gray-500 cursor-pointer ml-1;
    @apply transition-all duration-200 ease-in-out;
    @apply hover:bg-red-500 hover:text-white;
    @apply focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1;
  }

  /* Tab Panels Container */
  .apg-tabpanels {
    @apply flex-1 relative bg-white;
  }

  /* Individual Tab Panel */
  .apg-tabpanel {
    @apply p-4 min-h-[200px];
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset;
  }

  .apg-tabpanel--active {
    @apply block;
  }

  .apg-tabpanel--inactive {
    @apply hidden;
  }
}

/* =============================================================================
   ACCESSIBILITY ENHANCEMENTS
   ============================================================================= */

@layer utilities {
  /* High Contrast Mode Support */
  @media (prefers-contrast: high) {
    .apg-tabs {
      @apply border-4;
    }

    .apg-tab--selected {
      @apply bg-black text-white;
    }

    .apg-tab--selected.apg-tab--horizontal {
      @apply border-b-yellow-400;
    }

    .apg-tab--selected.apg-tab--vertical {
      @apply border-r-yellow-400;
    }

    .apg-tab:not(.apg-tab--selected):not(.apg-tab--disabled) {
      @apply bg-white text-black border-black;
    }
  }

  /* Reduced Motion Support */
  @media (prefers-reduced-motion: reduce) {
    .apg-tab,
    .apg-tab-delete {
      @apply transition-none;
    }
  }

  /* Focus Enhancement for Keyboard Users */
  .apg-tab:focus-visible {
    @apply ring-2 ring-blue-500 ring-offset-2;
    @apply outline outline-2 outline-blue-600 outline-offset-2;
  }

  /* Windows High Contrast Mode */
  @media (forced-colors: active) {
    .apg-tabs {
      border: 2px solid ButtonBorder;
      background: ButtonFace;
    }

    .apg-tablist {
      background: ButtonFace;
      border-color: ButtonBorder;
    }

    .apg-tab {
      border-color: ButtonBorder;
      background: ButtonFace;
      color: ButtonText;
    }

    .apg-tab--selected {
      background: Highlight;
      color: HighlightText;
      border-color: Highlight;
    }

    .apg-tab:focus {
      outline: 2px solid Highlight;
    }

    .apg-tabpanels {
      background: ButtonFace;
    }

    .apg-tabpanel {
      color: ButtonText;
    }
  }

  /* Mobile-specific optimizations */
  @media (max-width: 768px) {
    .apg-tab {
      @apply flex-shrink-0;
    }
  }
}