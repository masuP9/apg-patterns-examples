---
interface Props {
  level: 2 | 3 | 4;
  id?: string;
  class?: string;
}

const { level, id, class: className } = Astro.props;
const Tag = `h${level}` as 'h2' | 'h3' | 'h4';

// Get text from slot and generate slug
const slotContent = await Astro.slots.render('default');
// Strip HTML tags to get plain text
const text = slotContent.replace(/<[^>]*>/g, '').trim();
const slug = id ?? text.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]/g, '');
---

<Tag id={slug} class={className}>
  <slot />
</Tag>
