---
import { ResponsiveTable } from '@/components/ui/table';
---

<div class="prose dark:prose-invert max-w-none">
  <h3 class="text-lg font-medium mb-3">Testing Overview</h3>
  <p class="text-muted-foreground mb-4">
    The Alert component tests focus on verifying correct live region behavior and APG compliance.
    The most critical test is ensuring the alert container remains in the DOM when content changes.
  </p>

  <h3 class="text-lg font-medium mb-3">Test Categories</h3>

  <div class="mb-6">
    <h4 class="font-medium mb-2 flex items-center gap-2">
      <span class="inline-block w-3 h-3 rounded-full bg-red-500"></span>
      High Priority: APG Core Compliance
    </h4>
    <ResponsiveTable>
      <table class="w-full border-collapse text-sm">
        <thead>
          <tr class="border-b border-border">
            <th class="text-left py-2 pr-4">Test</th>
            <th class="text-left py-2">APG Requirement</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">role="alert" exists</td>
            <td class="py-2">Alert container must have alert role</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">Container always in DOM</td>
            <td class="py-2">Live region must not be dynamically added/removed</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">Same container on message change</td>
            <td class="py-2">Container element identity preserved during updates</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">Focus unchanged after alert</td>
            <td class="py-2">Alert must not move keyboard focus</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">Alert not focusable</td>
            <td class="py-2">Alert container must not have tabindex</td>
          </tr>
        </tbody>
      </table>
    </ResponsiveTable>
  </div>

  <div class="mb-6">
    <h4 class="font-medium mb-2 flex items-center gap-2">
      <span class="inline-block w-3 h-3 rounded-full bg-yellow-500"></span>
      Medium Priority: Accessibility Validation
    </h4>
    <ResponsiveTable>
      <table class="w-full border-collapse text-sm">
        <thead>
          <tr class="border-b border-border">
            <th class="text-left py-2 pr-4">Test</th>
            <th class="text-left py-2">WCAG Requirement</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">No axe violations (with message)</td>
            <td class="py-2">WCAG 2.1 AA compliance</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">No axe violations (empty)</td>
            <td class="py-2">WCAG 2.1 AA compliance</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">No axe violations (dismissible)</td>
            <td class="py-2">WCAG 2.1 AA compliance</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">Dismiss button accessible name</td>
            <td class="py-2">Button has aria-label</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">Dismiss button type="button"</td>
            <td class="py-2">Prevents form submission</td>
          </tr>
        </tbody>
      </table>
    </ResponsiveTable>
  </div>

  <div class="mb-6">
    <h4 class="font-medium mb-2 flex items-center gap-2">
      <span class="inline-block w-3 h-3 rounded-full bg-green-500"></span>
      Low Priority: Props &amp; Extensibility
    </h4>
    <ResponsiveTable>
      <table class="w-full border-collapse text-sm">
        <thead>
          <tr class="border-b border-border">
            <th class="text-left py-2 pr-4">Test</th>
            <th class="text-left py-2">Feature</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">variant prop changes styling</td>
            <td class="py-2">Visual customization</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">id prop sets custom ID</td>
            <td class="py-2">SSR support</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">className inheritance</td>
            <td class="py-2">Style customization</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">children for complex content</td>
            <td class="py-2">Content flexibility</td>
          </tr>
          <tr class="border-b border-border">
            <td class="py-2 pr-4">onDismiss callback fires</td>
            <td class="py-2">Event handling</td>
          </tr>
        </tbody>
      </table>
    </ResponsiveTable>
  </div>

  <h3 class="text-lg font-medium mb-3">Screen Reader Testing</h3>
  <p class="text-muted-foreground mb-4">
    Automated tests verify DOM structure, but manual testing with screen readers is essential for validating actual announcement behavior:
  </p>
  <ResponsiveTable>
    <table class="w-full border-collapse text-sm">
      <thead>
        <tr class="border-b border-border">
          <th class="text-left py-2 pr-4">Screen Reader</th>
          <th class="text-left py-2">Platform</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-b border-border">
          <td class="py-2 pr-4">VoiceOver</td>
          <td class="py-2">macOS / iOS</td>
        </tr>
        <tr class="border-b border-border">
          <td class="py-2 pr-4">NVDA</td>
          <td class="py-2">Windows</td>
        </tr>
        <tr class="border-b border-border">
          <td class="py-2 pr-4">JAWS</td>
          <td class="py-2">Windows</td>
        </tr>
        <tr class="border-b border-border">
          <td class="py-2 pr-4">TalkBack</td>
          <td class="py-2">Android</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>
  <p class="text-muted-foreground mt-2 text-sm">
    Verify that message changes trigger immediate announcement and that existing content on page load is NOT announced.
  </p>

  <h3 class="text-lg font-medium mb-3 mt-6">Running Tests</h3>
  <pre class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg text-sm overflow-x-auto"><code># Run all Alert tests
npm run test -- alert

# Run tests for specific framework
npm run test -- Alert.test.tsx    # React
npm run test -- Alert.test.vue    # Vue
npm run test -- Alert.test.svelte # Svelte</code></pre>
</div>
