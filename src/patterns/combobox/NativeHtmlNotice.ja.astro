---
import { ResponsiveTable } from '@/components/ui/table';
---

<div class="border-primary mb-8 rounded-lg border-2 p-4">
  <h2 class="mb-2 flex items-center gap-2 text-lg font-bold">
    <span aria-hidden="true">⚠️</span> まずネイティブ HTML を検討してください
  </h2>
  <p class="mb-4">
    <strong class="text-red-700 dark:text-red-400"
      >カスタムコンボボックスを使用する前に、ネイティブ HTML の代替手段を検討してください。</strong
    >
    これらは組み込みのセマンティクスを持ち、JavaScript なしで動作し、ブラウザネイティブのサポートがあります。
  </p>
  <div class="bg-muted mb-4 rounded-md p-3">
    <pre
      class="m-0 overflow-x-auto text-sm"><code>&lt;!-- シンプルなドロップダウン選択 --&gt;
&lt;label for="fruit"&gt;フルーツを選択&lt;/label&gt;
&lt;select id="fruit"&gt;
  &lt;option value="apple"&gt;りんご&lt;/option&gt;
  &lt;option value="banana"&gt;バナナ&lt;/option&gt;
&lt;/select&gt;

&lt;!-- 基本的なオートコンプリート --&gt;
&lt;label for="browser"&gt;ブラウザを選択&lt;/label&gt;
&lt;input list="browsers" id="browser" name="browser"&gt;
&lt;datalist id="browsers"&gt;
  &lt;option value="Chrome"&gt;
  &lt;option value="Firefox"&gt;
  &lt;option value="Safari"&gt;
&lt;/datalist&gt;</code></pre>
  </div>
  <p class="mb-4 text-sm">
    カスタムスタイル、複雑なフィルタリングロジック、リッチなオプション表示、またはネイティブ要素でサポートされていない動作が必要な場合にのみカスタムコンボボックスを使用してください。
  </p>

  <ResponsiveTable>
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">ユースケース</th>
          <th class="py-2 pr-4 text-left">ネイティブ HTML</th>
          <th class="py-2 text-left">カスタム実装</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">シンプルなドロップダウン選択</td>
          <td class="py-2 pr-4"
            ><b class="text-green-700 dark:text-green-400">&lt;select&gt; 推奨</b></td
          >
          <td class="py-2">不要</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">基本的なオートコンプリート候補</td>
          <td class="py-2 pr-4"
            ><b class="text-green-700 dark:text-green-400">&lt;datalist&gt; 推奨</b></td
          >
          <td class="py-2">不要</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">JavaScript 無効時のサポート</td>
          <td class="py-2 pr-4"
            ><b class="text-green-700 dark:text-green-400">ネイティブで動作</b></td
          >
          <td class="py-2">フォールバックが必要</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">カスタムオプション表示（アイコン、説明）</td>
          <td class="py-2 pr-4">非対応</td>
          <td class="py-2"><b class="text-green-700 dark:text-green-400">完全制御可能</b></td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">カスタムフィルタリングロジック</td>
          <td class="py-2 pr-4">基本的な前方一致のみ</td>
          <td class="py-2"
            ><b class="text-green-700 dark:text-green-400">カスタムアルゴリズム</b></td
          >
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">ブラウザ間で一貫したスタイル</td>
          <td class="py-2 pr-4">限定的（特に datalist）</td>
          <td class="py-2"><b class="text-green-700 dark:text-green-400">完全制御可能</b></td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">キーボードナビゲーションのカスタマイズ</td>
          <td class="py-2 pr-4">ブラウザデフォルトのみ</td>
          <td class="py-2"><b class="text-green-700 dark:text-green-400">カスタマイズ可能</b></td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">無効なオプション</td>
          <td class="py-2 pr-4"
            ><b class="text-green-700 dark:text-green-400">&lt;select&gt; のみ</b></td
          >
          <td class="py-2"><b class="text-green-700 dark:text-green-400">完全対応</b></td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>
  <p class="text-muted-foreground mt-3 text-xs">
    ネイティブ <code>&lt;select&gt;</code> 要素は優れたアクセシビリティ、フォーム送信サポート、JavaScript
    不要で動作します。<code>&lt;datalist&gt;</code> 要素は基本的なオートコンプリート機能を提供しますが、ブラウザ間で見た目が大きく異なり、無効なオプションやカスタム表示には対応していません。
  </p>

  <div
    class="mt-4 rounded-md border border-amber-300 bg-amber-50 p-3 dark:border-amber-700 dark:bg-amber-950"
  >
    <h3 class="mb-2 flex items-center gap-2 text-sm font-bold text-amber-800 dark:text-amber-200">
      <span aria-hidden="true">⚠️</span> &lt;datalist&gt; のアクセシビリティ上の問題
    </h3>
    <p class="mb-2 text-sm text-amber-900 dark:text-amber-100">
      <code>&lt;datalist&gt;</code> 要素には、以下のアクセシビリティ上の問題が知られています：
    </p>
    <ul class="mb-2 list-inside list-disc space-y-1 text-sm text-amber-900 dark:text-amber-100">
      <li>
        <strong>テキストズーム非対応：</strong>datalist
        のオプションのフォントサイズはページをズームしても拡大されず、テキスト拡大に依存するユーザーに問題を引き起こします。
      </li>
      <li>
        <strong>CSS スタイリングの制限：</strong
        >オプションをハイコントラストモード向けにスタイリングできないため、視覚障害のあるユーザーへの対応が困難です。
      </li>
      <li>
        <strong>スクリーンリーダーの互換性：</strong
        >一部のスクリーンリーダーとブラウザの組み合わせ（例：NVDA と
        Firefox）では、オートサジェストポップアップの内容が読み上げられません。
      </li>
    </ul>
    <p class="text-xs text-amber-700 dark:text-amber-300">
      出典: <a
        href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/datalist#accessibility"
        target="_blank"
        rel="noopener noreferrer"
        class="underline hover:no-underline">MDN Web Docs - &lt;datalist&gt;: Accessibility</a
      >
    </p>
  </div>
</div>
