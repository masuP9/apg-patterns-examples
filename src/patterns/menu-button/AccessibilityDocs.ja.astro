---
import ExternalLink from '@/components/ui/ExternalLink.astro';
import { ResponsiveTable } from '@/components/ui/table';
---

<div class="prose dark:prose-invert max-w-none">
  <h3 class="mb-3 text-lg font-medium">WAI-ARIA ロール</h3>
  <ResponsiveTable class="mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">ロール</th>
          <th class="py-2 pr-4 text-left">対象要素</th>
          <th class="py-2 text-left">説明</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>button</code></td>
          <td class="py-2 pr-4">トリガー（<code>&lt;button&gt;</code>）</td>
          <td class="py-2"
            >メニューを開くトリガー（<code>&lt;button&gt;</code>要素による暗黙的なロール）</td
          >
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>menu</code></td>
          <td class="py-2 pr-4">コンテナ（<code>&lt;ul&gt;</code>）</td>
          <td class="py-2">ユーザーに選択肢のリストを提供するウィジェット</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>menuitem</code></td>
          <td class="py-2 pr-4">各アイテム（<code>&lt;li&gt;</code>）</td>
          <td class="py-2">メニュー内のオプション</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>
  <p class="text-muted-foreground mb-6 text-sm">
    <ExternalLink href="https://w3c.github.io/aria/#menu" class="text-primary hover:underline">
      WAI-ARIA menu role
    </ExternalLink>
  </p>

  <h3 class="mb-3 text-lg font-medium">WAI-ARIA プロパティ（ボタン）</h3>
  <ResponsiveTable class="mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">属性</th>
          <th class="py-2 pr-4 text-left">値</th>
          <th class="py-2 pr-4 text-left">必須</th>
          <th class="py-2 text-left">説明</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-haspopup</code></td>
          <td class="py-2 pr-4"><code>"menu"</code></td>
          <td class="py-2 pr-4">はい</td>
          <td class="py-2">ボタンがメニューを開くことを示す</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-expanded</code></td>
          <td class="py-2 pr-4"><code>true</code> | <code>false</code></td>
          <td class="py-2 pr-4">はい</td>
          <td class="py-2">メニューが開いているかどうかを示す</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-controls</code></td>
          <td class="py-2 pr-4">ID参照</td>
          <td class="py-2 pr-4">いいえ</td>
          <td class="py-2">メニュー要素を参照する</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>

  <h3 class="mb-3 text-lg font-medium">WAI-ARIA プロパティ（メニュー）</h3>
  <ResponsiveTable class="mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">属性</th>
          <th class="py-2 pr-4 text-left">対象</th>
          <th class="py-2 pr-4 text-left">値</th>
          <th class="py-2 pr-4 text-left">必須</th>
          <th class="py-2 text-left">説明</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-labelledby</code></td>
          <td class="py-2 pr-4">menu</td>
          <td class="py-2 pr-4">ID参照</td>
          <td class="py-2 pr-4">はい*</td>
          <td class="py-2">メニューを開くボタンを参照する</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-label</code></td>
          <td class="py-2 pr-4">menu</td>
          <td class="py-2 pr-4">文字列</td>
          <td class="py-2 pr-4">はい*</td>
          <td class="py-2">メニューのアクセシブルな名前を提供する</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-disabled</code></td>
          <td class="py-2 pr-4">menuitem</td>
          <td class="py-2 pr-4"><code>true</code></td>
          <td class="py-2 pr-4">いいえ</td>
          <td class="py-2">メニューアイテムが無効であることを示す</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>
  <p class="text-muted-foreground mb-6 text-sm">
    * <code>aria-labelledby</code>または<code>aria-label</code>のいずれかがアクセシブルな名前のために必須です
  </p>

  <h3 class="mb-3 text-lg font-medium">キーボードサポート</h3>
  <h4 class="mb-2 font-medium">ボタン（メニューが閉じている状態）</h4>
  <ResponsiveTable class="mb-4">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">キー</th>
          <th class="py-2 text-left">アクション</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Enter</kbd> / <kbd
              class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Space</kbd
            ></td
          >
          <td class="py-2">メニューを開き、最初のアイテムにフォーカスを移動する</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Down Arrow</kbd></td
          >
          <td class="py-2">メニューを開き、最初のアイテムにフォーカスを移動する</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Up Arrow</kbd></td
          >
          <td class="py-2">メニューを開き、最後のアイテムにフォーカスを移動する</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>

  <h4 class="mb-2 font-medium">メニュー（開いている状態）</h4>
  <ResponsiveTable class="mb-4">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">キー</th>
          <th class="py-2 text-left">アクション</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Down Arrow</kbd></td
          >
          <td class="py-2">次のアイテムにフォーカスを移動する（最後の項目から最初にラップする）</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Up Arrow</kbd></td
          >
          <td class="py-2">前のアイテムにフォーカスを移動する（最初の項目から最後にラップする）</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Home</kbd></td
          >
          <td class="py-2">最初のアイテムにフォーカスを移動する</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">End</kbd></td
          >
          <td class="py-2">最後のアイテムにフォーカスを移動する</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Escape</kbd></td
          >
          <td class="py-2">メニューを閉じ、フォーカスをボタンに戻す</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Tab</kbd></td
          >
          <td class="py-2">メニューを閉じ、次のフォーカス可能な要素にフォーカスを移動する</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Enter</kbd> / <kbd
              class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Space</kbd
            ></td
          >
          <td class="py-2">フォーカスされたアイテムを実行し、メニューを閉じる</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">文字を入力</td>
          <td class="py-2">先行入力: 入力された文字で始まるアイテムにフォーカスを移動する</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>

  <h3 class="mb-3 text-lg font-medium">フォーカス管理</h3>
  <p class="text-muted-foreground mb-4">
    このコンポーネントは、フォーカス管理に<strong>Roving Tabindex</strong>パターンを使用します:
  </p>
  <ul class="text-muted-foreground mb-4 list-inside list-disc space-y-2">
    <li>一度に1つのメニューアイテムのみが<code>tabindex="0"</code>を持つ</li>
    <li>その他のメニューアイテムは<code>tabindex="-1"</code>を持つ</li>
    <li>矢印キーでアイテム間のフォーカス移動（ラップあり）</li>
    <li>無効なアイテムはナビゲーション中にスキップされる</li>
    <li>メニューが閉じると、フォーカスはボタンに戻る</li>
  </ul>

  <h3 class="mb-3 text-lg font-medium">非表示状態</h3>
  <p class="text-muted-foreground mb-4">
    閉じているとき、メニューは<code>hidden</code>と<code>inert</code>属性の両方を使用して以下を実現します:
  </p>
  <ul class="text-muted-foreground mb-4 list-inside list-disc space-y-2">
    <li>視覚的な表示からメニューを隠す</li>
    <li>アクセシビリティツリーからメニューを削除する</li>
    <li>非表示のアイテムに対するキーボードとマウスの操作を防ぐ</li>
  </ul>
</div>
