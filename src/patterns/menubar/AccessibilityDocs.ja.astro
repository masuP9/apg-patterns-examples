---
import ExternalLink from '@/components/ui/ExternalLink.astro';
import { ResponsiveTable } from '@/components/ui/table';
---

<div class="prose dark:prose-invert max-w-none">
  <h3 class="mb-3 text-lg font-medium">WAI-ARIA ロール</h3>
  <ResponsiveTable class="mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">ロール</th>
          <th class="py-2 pr-4 text-left">対象要素</th>
          <th class="py-2 text-left">説明</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>menubar</code></td>
          <td class="py-2 pr-4">水平コンテナ（<code>&lt;ul&gt;</code>）</td>
          <td class="py-2">トップレベルのメニューバー（常に表示）</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>menu</code></td>
          <td class="py-2 pr-4">垂直コンテナ（<code>&lt;ul&gt;</code>）</td>
          <td class="py-2">ドロップダウンメニューまたはサブメニュー</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>menuitem</code></td>
          <td class="py-2 pr-4">アイテム（<code>&lt;span&gt;</code>）</td>
          <td class="py-2">標準的なアクションアイテム</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>menuitemcheckbox</code></td>
          <td class="py-2 pr-4">チェックボックスアイテム</td>
          <td class="py-2">トグル可能なオプション</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>menuitemradio</code></td>
          <td class="py-2 pr-4">ラジオアイテム</td>
          <td class="py-2">グループ内の排他的なオプション</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>separator</code></td>
          <td class="py-2 pr-4">区切り線（<code>&lt;hr&gt;</code>）</td>
          <td class="py-2">視覚的な区切り（フォーカス不可）</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>group</code></td>
          <td class="py-2 pr-4">グループコンテナ</td>
          <td class="py-2">ラジオアイテムをラベル付きでグループ化</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>none</code></td>
          <td class="py-2 pr-4"><code>&lt;li&gt;</code>要素</td>
          <td class="py-2">スクリーンリーダーからリストセマンティクスを隠す</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>
  <p class="text-muted-foreground mb-6 text-sm">
    <ExternalLink href="https://w3c.github.io/aria/#menubar" class="text-primary hover:underline">
      WAI-ARIA menubar role
    </ExternalLink>
  </p>

  <h3 class="mb-3 text-lg font-medium">WAI-ARIA プロパティ（メニューバーアイテム）</h3>
  <ResponsiveTable class="mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">属性</th>
          <th class="py-2 pr-4 text-left">値</th>
          <th class="py-2 pr-4 text-left">必須</th>
          <th class="py-2 text-left">説明</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-haspopup</code></td>
          <td class="py-2 pr-4"><code>"menu"</code></td>
          <td class="py-2 pr-4">はい*</td>
          <td class="py-2"
            >アイテムがメニューを開くことを示す（<code>"true"</code>ではなく<code>"menu"</code
            >を使用）</td
          >
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-expanded</code></td>
          <td class="py-2 pr-4"><code>true</code> | <code>false</code></td>
          <td class="py-2 pr-4">はい*</td>
          <td class="py-2">メニューが開いているかどうかを示す</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>
  <p class="text-muted-foreground mb-6 text-sm">* サブメニューを持つアイテムのみ</p>

  <h3 class="mb-3 text-lg font-medium">WAI-ARIA プロパティ（メニュー/サブメニュー）</h3>
  <ResponsiveTable class="mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">属性</th>
          <th class="py-2 pr-4 text-left">対象</th>
          <th class="py-2 pr-4 text-left">値</th>
          <th class="py-2 pr-4 text-left">必須</th>
          <th class="py-2 text-left">説明</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-labelledby</code></td>
          <td class="py-2 pr-4">menu</td>
          <td class="py-2 pr-4">ID参照</td>
          <td class="py-2 pr-4">はい**</td>
          <td class="py-2">親のmenuitemを参照する</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-label</code></td>
          <td class="py-2 pr-4">menubar/menu</td>
          <td class="py-2 pr-4">文字列</td>
          <td class="py-2 pr-4">はい**</td>
          <td class="py-2">アクセシブルな名前を提供する</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-checked</code></td>
          <td class="py-2 pr-4">checkbox/radio</td>
          <td class="py-2 pr-4"><code>true</code> | <code>false</code></td>
          <td class="py-2 pr-4">はい</td>
          <td class="py-2">チェック状態を示す</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-disabled</code></td>
          <td class="py-2 pr-4">menuitem</td>
          <td class="py-2 pr-4"><code>true</code></td>
          <td class="py-2 pr-4">いいえ</td>
          <td class="py-2">アイテムが無効であることを示す</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>aria-hidden</code></td>
          <td class="py-2 pr-4">menu/submenu</td>
          <td class="py-2 pr-4"><code>true</code> | <code>false</code></td>
          <td class="py-2 pr-4">はい</td>
          <td class="py-2">閉じているときメニューをスクリーンリーダーから隠す</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>
  <p class="text-muted-foreground mb-6 text-sm">
    ** <code>aria-labelledby</code>または<code>aria-label</code
    >のいずれかがアクセシブルな名前のために必須です
  </p>

  <h3 class="mb-3 text-lg font-medium">キーボードサポート</h3>
  <h4 class="mb-2 font-medium">メニューバーナビゲーション</h4>
  <ResponsiveTable class="mb-4">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">キー</th>
          <th class="py-2 text-left">アクション</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Right Arrow</kbd></td
          >
          <td class="py-2">次のメニューバーアイテムにフォーカスを移動（最後から最初にラップ）</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Left Arrow</kbd></td
          >
          <td class="py-2">前のメニューバーアイテムにフォーカスを移動（最初から最後にラップ）</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Down Arrow</kbd></td
          >
          <td class="py-2">サブメニューを開き、最初のアイテムにフォーカス</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Up Arrow</kbd></td
          >
          <td class="py-2">サブメニューを開き、最後のアイテムにフォーカス</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Enter</kbd> /
            <kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Space</kbd></td
          >
          <td class="py-2">サブメニューを開き、最初のアイテムにフォーカス</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Home</kbd></td
          >
          <td class="py-2">最初のメニューバーアイテムにフォーカスを移動</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">End</kbd></td
          >
          <td class="py-2">最後のメニューバーアイテムにフォーカスを移動</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Tab</kbd></td
          >
          <td class="py-2">すべてのメニューを閉じてフォーカスを外に移動</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>

  <h4 class="mb-2 font-medium">メニュー/サブメニューナビゲーション</h4>
  <ResponsiveTable class="mb-4">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">キー</th>
          <th class="py-2 text-left">アクション</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Down Arrow</kbd></td
          >
          <td class="py-2">次のアイテムにフォーカスを移動（最後から最初にラップ）</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Up Arrow</kbd></td
          >
          <td class="py-2">前のアイテムにフォーカスを移動（最初から最後にラップ）</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Right Arrow</kbd></td
          >
          <td class="py-2"
            >サブメニューがあれば開く、またはトップレベルメニューでは次のメニューバーアイテムのメニューに移動</td
          >
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Left Arrow</kbd></td
          >
          <td class="py-2"
            >サブメニューを閉じて親に戻る、またはトップレベルメニューでは前のメニューバーアイテムのメニューに移動</td
          >
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Enter</kbd> /
            <kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Space</kbd></td
          >
          <td class="py-2"
            >アイテムを実行してメニューを閉じる；チェックボックス/ラジオは状態を切り替えてメニューを開いたままにする</td
          >
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Escape</kbd></td
          >
          <td class="py-2"
            >メニューを閉じてフォーカスを親（メニューバーアイテムまたは親menuitem）に戻す</td
          >
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">Home</kbd></td
          >
          <td class="py-2">最初のアイテムにフォーカスを移動</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"
            ><kbd class="rounded bg-gray-100 px-2 py-1 dark:bg-gray-800">End</kbd></td
          >
          <td class="py-2">最後のアイテムにフォーカスを移動</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">文字を入力</td>
          <td class="py-2">先行入力: 入力された文字で始まるアイテムにフォーカスを移動</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>

  <h3 class="mb-3 text-lg font-medium">フォーカス管理</h3>
  <p class="text-muted-foreground mb-4">
    このコンポーネントは、フォーカス管理に<strong>Roving Tabindex</strong>パターンを使用します:
  </p>
  <ul class="text-muted-foreground mb-4 list-inside list-disc space-y-2">
    <li>一度に1つのメニューバーアイテムのみが<code>tabindex="0"</code>を持つ</li>
    <li>その他のアイテムは<code>tabindex="-1"</code>を持つ</li>
    <li>矢印キーでアイテム間のフォーカス移動（ラップあり）</li>
    <li>無効なアイテムはフォーカス可能だが実行不可（APG推奨）</li>
    <li>区切り線はフォーカス不可</li>
    <li>メニューが閉じると、フォーカスは呼び出し元に戻る</li>
  </ul>

  <h3 class="mb-3 text-lg font-medium">Menu-Button との違い</h3>
  <ResponsiveTable class="mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">機能</th>
          <th class="py-2 pr-4 text-left">Menu-Button</th>
          <th class="py-2 text-left">Menubar</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">トップレベル構造</td>
          <td class="py-2 pr-4"><code>&lt;button&gt;</code>トリガー</td>
          <td class="py-2"><code>&lt;ul role="menubar"&gt;</code>（常に表示）</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">水平ナビゲーション</td>
          <td class="py-2 pr-4">なし</td>
          <td class="py-2">メニューバーアイテム間で<code>←</code>/<code>→</code></td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">ホバー動作</td>
          <td class="py-2 pr-4">なし</td>
          <td class="py-2">メニューが開いているときに自動切り替え</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>&lt;li&gt;</code>のロール</td>
          <td class="py-2 pr-4">常に指定されるとは限らない</td>
          <td class="py-2">すべてに<code>role="none"</code>が必須</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>

  <h3 class="mb-3 text-lg font-medium">非表示状態</h3>
  <p class="text-muted-foreground mb-4">
    閉じているとき、メニューは<code>aria-hidden="true"</code>とCSSを使用して以下を実現します:
  </p>
  <ul class="text-muted-foreground mb-4 list-inside list-disc space-y-2">
    <li>スクリーンリーダーからメニューを隠す（<code>aria-hidden</code>）</li>
    <li>視覚的にメニューを隠す（<code>visibility: hidden</code>）</li>
    <li>ポインター操作を防ぐ（<code>pointer-events: none</code>）</li>
    <li>開閉時のスムーズなCSSアニメーションを可能にする</li>
  </ul>
  <p class="text-muted-foreground mb-4">
    開いているとき、メニューは<code>aria-hidden="false"</code>と<code>visibility: visible</code
    >になります。
  </p>
</div>
