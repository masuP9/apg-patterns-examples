---
import ExternalLink from '@/components/ui/ExternalLink.astro';
import { ResponsiveTable } from '@/components/ui/table';
---

<div class="prose dark:prose-invert max-w-none">
  <h3 class="mb-3 text-lg font-medium">WAI-ARIA Roles</h3>
  <ResponsiveTable class="mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">Role</th>
          <th class="py-2 pr-4 text-left">Element</th>
          <th class="py-2 text-left">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>table</code></td>
          <td class="py-2 pr-4">Container element</td>
          <td class="py-2">
            Identifies the element as a table structure containing rows and cells of data.
          </td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>rowgroup</code></td>
          <td class="py-2 pr-4">Header/Body container</td>
          <td class="py-2">
            Groups rows together (equivalent to <code>&lt;thead&gt;</code>, <code
              >&lt;tbody&gt;</code
            >, <code>&lt;tfoot&gt;</code>).
          </td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>row</code></td>
          <td class="py-2 pr-4">Row element</td>
          <td class="py-2">
            A row of cells within the table (equivalent to <code>&lt;tr&gt;</code>).
          </td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>columnheader</code></td>
          <td class="py-2 pr-4">Header cell</td>
          <td class="py-2">
            A header cell for a column (equivalent to <code>&lt;th&gt;</code> in header row).
          </td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>rowheader</code></td>
          <td class="py-2 pr-4">Header cell</td>
          <td class="py-2">
            A header cell for a row (equivalent to <code>&lt;th scope="row"&gt;</code>).
          </td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4"><code>cell</code></td>
          <td class="py-2 pr-4">Data cell</td>
          <td class="py-2">A data cell within a row (equivalent to <code>&lt;td&gt;</code>).</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>
  <p class="text-muted-foreground mb-6 text-sm">
    The <code>table</code> role creates a static tabular structure for displaying data. Unlike the
    <code>grid</code> role, tables are not interactive and do not support keyboard navigation between
    cells.
  </p>

  <h3 class="mb-3 text-lg font-medium">WAI-ARIA Properties</h3>

  <div class="mb-6">
    <h4 class="mb-2 font-medium">
      <code>aria-label</code> / <code>aria-labelledby</code>
    </h4>
    <p class="text-muted-foreground mb-3">
      Provides an accessible name for the table. One of these is required for screen reader users to
      understand the table's purpose.
    </p>
    <ResponsiveTable class="mb-2">
      <table class="w-full border-collapse">
        <tbody>
          <tr class="border-border border-b">
            <td class="w-32 py-2 pr-4 font-medium">Type</td>
            <td class="py-2">String / ID reference</td>
          </tr>
          <tr class="border-border border-b">
            <td class="py-2 pr-4 font-medium">Required</td>
            <td class="py-2">Yes (one or the other)</td>
          </tr>
          <tr class="border-border border-b">
            <td class="py-2 pr-4 font-medium">Example</td>
            <td class="py-2">
              <code>aria-label="User List"</code>
            </td>
          </tr>
        </tbody>
      </table>
    </ResponsiveTable>
  </div>

  <div class="mb-6">
    <h4 class="mb-2 font-medium"><code>aria-describedby</code></h4>
    <p class="text-muted-foreground mb-3">
      References an element providing additional description for the table.
    </p>
    <ResponsiveTable class="mb-2">
      <table class="w-full border-collapse">
        <tbody>
          <tr class="border-border border-b">
            <td class="w-32 py-2 pr-4 font-medium">Type</td>
            <td class="py-2">ID reference</td>
          </tr>
          <tr class="border-border border-b">
            <td class="py-2 pr-4 font-medium">Required</td>
            <td class="py-2">No</td>
          </tr>
        </tbody>
      </table>
    </ResponsiveTable>
  </div>

  <h3 class="mb-3 text-lg font-medium">WAI-ARIA States</h3>

  <div class="mb-6">
    <h4 class="mb-2 font-medium"><code>aria-sort</code></h4>
    <p class="text-muted-foreground mb-3">
      Indicates the current sort direction of a column. Applied to <code>columnheader</code> or
      <code>rowheader</code> elements.
    </p>
    <ResponsiveTable class="mb-2">
      <table class="w-full border-collapse">
        <tbody>
          <tr class="border-border border-b">
            <td class="w-32 py-2 pr-4 font-medium">Values</td>
            <td class="py-2">
              <code>ascending</code>, <code>descending</code>, <code>none</code>, <code>other</code>
            </td>
          </tr>
          <tr class="border-border border-b">
            <td class="py-2 pr-4 font-medium">Required</td>
            <td class="py-2">No (only for sortable columns)</td>
          </tr>
          <tr class="border-border border-b">
            <td class="py-2 pr-4 font-medium">Updated</td>
            <td class="py-2">When sort order changes</td>
          </tr>
        </tbody>
      </table>
    </ResponsiveTable>
  </div>

  <h3 class="mb-3 text-lg font-medium">Virtualization Support</h3>
  <p class="text-muted-foreground mb-3">
    For large tables that only render visible rows/columns, these attributes help assistive
    technologies understand the full table structure:
  </p>

  <div class="mb-6">
    <h4 class="mb-2 font-medium">
      <code>aria-colcount</code> / <code>aria-rowcount</code>
    </h4>
    <p class="text-muted-foreground mb-3">
      Defines the total number of columns/rows in the table when only a subset is rendered.
    </p>
    <ResponsiveTable class="mb-2">
      <table class="w-full border-collapse">
        <tbody>
          <tr class="border-border border-b">
            <td class="w-32 py-2 pr-4 font-medium">Type</td>
            <td class="py-2">Number</td>
          </tr>
          <tr class="border-border border-b">
            <td class="py-2 pr-4 font-medium">Applied to</td>
            <td class="py-2">
              <code>table</code> role element
            </td>
          </tr>
          <tr class="border-border border-b">
            <td class="py-2 pr-4 font-medium">Required</td>
            <td class="py-2">No (only for virtualized tables)</td>
          </tr>
        </tbody>
      </table>
    </ResponsiveTable>
  </div>

  <div class="mb-6">
    <h4 class="mb-2 font-medium">
      <code>aria-colindex</code> / <code>aria-rowindex</code>
    </h4>
    <p class="text-muted-foreground mb-3">
      Indicates the position of a cell or row within the full table.
    </p>
    <ResponsiveTable class="mb-2">
      <table class="w-full border-collapse">
        <tbody>
          <tr class="border-border border-b">
            <td class="w-32 py-2 pr-4 font-medium">Type</td>
            <td class="py-2">Number (1-based)</td>
          </tr>
          <tr class="border-border border-b">
            <td class="py-2 pr-4 font-medium">Applied to</td>
            <td class="py-2">
              <code>aria-colindex</code> on cells, <code>aria-rowindex</code> on rows
            </td>
          </tr>
          <tr class="border-border border-b">
            <td class="py-2 pr-4 font-medium">Required</td>
            <td class="py-2">No (only for virtualized tables)</td>
          </tr>
        </tbody>
      </table>
    </ResponsiveTable>
  </div>

  <h3 class="mb-3 text-lg font-medium">Keyboard Support</h3>
  <p class="text-muted-foreground mb-6">
    <strong>Not applicable.</strong> The table pattern is a static structure and is not interactive. Unlike
    the <code>grid</code> pattern, users cannot navigate between cells using arrow keys. Interactive elements
    within cells (buttons, links) receive focus through normal tab order.
  </p>

  <h3 class="mb-3 text-lg font-medium">Accessible Naming</h3>
  <p class="text-muted-foreground mb-3">Tables must have an accessible name. Options include:</p>
  <ul class="mb-6 list-disc space-y-2 pl-6">
    <li>
      <code>aria-label</code> - Provides an invisible label for the table
    </li>
    <li>
      <code>aria-labelledby</code> - References an external element as the label
    </li>
    <li>
      <strong>Caption element</strong> - A visible caption can provide the accessible name if properly
      associated
    </li>
  </ul>

  <h3 class="mb-3 text-lg font-medium">Table vs Grid</h3>
  <p class="text-muted-foreground mb-3">
    Understanding when to use <code>table</code> vs <code>grid</code> roles:
  </p>
  <ResponsiveTable class="mb-6">
    <table class="w-full border-collapse">
      <thead>
        <tr class="border-border border-b">
          <th class="py-2 pr-4 text-left">Feature</th>
          <th class="py-2 pr-4 text-left">Table</th>
          <th class="py-2 text-left">Grid</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">Purpose</td>
          <td class="py-2 pr-4">Static data display</td>
          <td class="py-2">Interactive data manipulation</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">Keyboard navigation</td>
          <td class="py-2 pr-4">Not applicable</td>
          <td class="py-2">Arrow keys between cells</td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">Cell selection</td>
          <td class="py-2 pr-4">Not supported</td>
          <td class="py-2">Via <code>aria-selected</code></td>
        </tr>
        <tr class="border-border border-b">
          <td class="py-2 pr-4">Focus management</td>
          <td class="py-2 pr-4">None required</td>
          <td class="py-2">Roving tabindex</td>
        </tr>
      </tbody>
    </table>
  </ResponsiveTable>

  <h3 class="mb-3 text-lg font-medium">References</h3>
  <ul class="list-disc space-y-2 pl-6">
    <li>
      <ExternalLink
        href="https://www.w3.org/WAI/ARIA/apg/patterns/table/"
        class="text-primary hover:underline"
      >
        WAI-ARIA APG: Table Pattern
      </ExternalLink>
    </li>
    <li>
      <ExternalLink
        href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/table"
        class="text-primary hover:underline"
      >
        MDN: &lt;table&gt; element
      </ExternalLink>
    </li>
    <li>
      <ExternalLink href="https://w3c.github.io/aria/#table" class="text-primary hover:underline">
        W3C ARIA: table role
      </ExternalLink>
    </li>
  </ul>
</div>
